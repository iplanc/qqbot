# GTAOL æ•°æ®æŸ¥è¯¢ä¿¡æ¯å‘å¸ƒæœºå™¨äºº
## å‘½ä»¤
```
@æœºå™¨äºº /æŸ¥è¯¢ ID
# è¿”å›apiè·å–åˆ°çš„æ•°æ®
# ç¤ºä¾‹è¾“å‡º

>> æˆåŠŸæ·»åŠ RockstarIdè‡³å¾…å¤„ç†åˆ—è¡¨, å½“å‰è¿˜æœ‰1ä¸ªå¾…æŸ¥è¯¢æ˜µç§°

>> æ˜µç§°: planc26
>> é”™è¯¯ä»£å·: æ˜µç§°ä¸å­˜åœ¨
>> æ•°æ®æ›´æ–°æ—¶é—´: 2022-05-18 18:31:24
>> ç´¢å¼•: AVVKNH
>> æŸ¥è¯¢çŠ¶æ€: 201
```

```
@æœºå™¨äºº /ä¿¡æ¯ ID
# è¿”å›apiè·å–åˆ°çš„æ•°æ®
# ç¤ºä¾‹è¾“å‡º

>> æˆåŠŸæ·»åŠ RockstarIdè‡³å¾…å¤„ç†åˆ—è¡¨, å½“å‰è¿˜æœ‰1ä¸ªå¾…æŸ¥è¯¢æ˜µç§°

>> {
>>     "æ˜µç§°": "planc26", 
>>     "æ•°æ®è®°å½•": {
>>         "ç´¢å¼•": "AVVKNH", 
>>         "æ—¶é—´": "2022-05-18 18:31:24", 
>>         "çŠ¶æ€": "æ˜µç§°ä¸å­˜åœ¨", 
>>         "ä»£å·": 201
>>     }
>> }
```

```
@æœºå™¨äºº /æ´»åŠ¨
# è¿”å›é¢‘é“ä¸­ç¬¬ä¸€ä¸ªåå­—ä¸­å¸¦ "æ¯å‘¨æ´»åŠ¨" çš„èŠå¤©å­é¢‘é“
# ç¤ºä¾‹è¾“å‡º

>> #ğŸŒŸé€Ÿè®¯ï½œæ¯å‘¨æ´»åŠ¨ 
```

```
@æœºå™¨äºº /ç¦è¨€ @æˆå‘˜ ç§’æ•° èº«åˆ†ç»„
# å¿…é¡»ç”±é¢‘é“ä¸»/ç®¡ç†å‘˜è°ƒç”¨ï¼Œç¦è¨€æ™®é€šç”¨æˆ·ï¼Œå¿…é¡»æ˜¯å·²å­˜åœ¨çš„èº«åˆ†ç»„ï¼ˆå…¶å®æ˜¯çŠ¯æ‡’äº†ï¼‰
# ç¤ºä¾‹è¾“å‡º

>> å·²ç¦è¨€id
>> å·²æ·»åŠ èº«ä»½ç»„id
```

### éšè—å‘½ä»¤
```
@æœºå™¨äºº /çŠ¶æ€
# è¿”å›æœåŠ¡å™¨cpuçŠ¶æ€
# ç¤ºä¾‹è¾“å‡º

>> Linux 5.4.0-77-generic (VM-8-6-ubuntu) 	05/18/2022 	_x86_64_	(1 CPU)

>> avg-cpu:  %user   %nice %system %iowait  %steal   %idle
>>            0.87    0.01    0.69    0.07    0.00   98.36
```

```
@æœºå™¨äºº /é¢‘é“
# è¿”å›æœºå™¨äººå·²åŠ å…¥çš„é¢‘é“
```
## éƒ¨ç½²
### ç›®å½•ç»“æ„
- .gitignore
- readme.md
- start_fake.py
    - ä¸“ä¾›å®¡æ ¸ç”¨çš„å‡è¿›ç¨‹ï¼Œåªæœ‰è¾“å…¥è¾“å‡ºåŠŸèƒ½ï¼Œä¸çœŸqqæœºå™¨äººè¿›ç¨‹å…±äº«appid
- start.py
    - qqæœºå™¨äººä¸»æ–‡ä»¶
- start.sh
    - å°è£…å¥½çš„ä¸€é”®å¯åŠ¨è„šæœ¬ï¼ˆæ²¡å•¥ç”¨ï¼‰
- weekly.py
    - æ¯å‘¨æ´»åŠ¨å‘å¸ƒæœºå™¨äºº

### é…ç½®æµç¨‹
#### config.yaml
```yaml
token:
  appid: "[appid]" # q.qq.com è·å–åˆ°çš„appid
  token: "[token]" # q.qq.com è·å–åˆ°çš„token
```

### weekly.py
```bash
Ubuntu
$ crontab -e
```
```
0 7 * * 5 python3 [path/to]/weekly.py
```
|0åˆ†|7æ—¶|æ¯å¤©|æ¯æœˆ|å‘¨äº”|æ‰§è¡Œå‘½ä»¤|
|:--|:--|:--|:--|:--|:--|
|0|7|*|*|5|python3 [path/to]/weekly.py|

## äºŒæ¬¡å¼€å‘
ä¸»è¦åŠŸèƒ½ç”±æ­¤å‡½æ•°åˆ—å‡ºï¼Œå…¶ä¸­çš„ifç»“æ„ä½“åŒºåˆ«äº†å„ç§å‘½ä»¤
```python
async def _message_handler(event, message: qqbot.Message)
```
### å…³é”®è¯å±è”½
é€šè¿‡å­—å…¸å®šä¹‰çš„é”®å€¼å¯¹è¿›è¡Œæ›¿æ¢æ•æ„Ÿè¯ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼
```python
def keywordsBlock(str):
    keywords = {
        "ä¸‹æ³¨": "è™¾ç…®",
        "GTA": "ç»™å¥¹çˆ±",
        "èµŒåœº": "DC",
        "æç¤º: æ›´å¤šæ•°æ®è¯·ä½¿ç”¨å°ç¨‹åº â€œæ´›åœ£éƒ½ Expressâ€æŸ¥çœ‹": "",
    }
    for eachWord in keywords.keys():
        str = re.sub(eachWord, keywords.get(eachWord), str)
    return str.strip("\n")
```
### _message_handler()è¯¦è§£
è¯¥å‡½æ•°å¯ä»¥æŠ½è±¡ä¸ºä»¥ä¸‹ä¼ªä»£ç ï¼Œæ”¶åˆ°@æ•°æ®åå¯¹æ¶ˆæ¯è¿›è¡Œè§£æï¼Œå»æ‰æ¶ˆæ¯ä¸¤ä¾§çš„ç©ºæ ¼ï¼Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¶ˆæ¯ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼å°†å…¶æ›¿æ¢æˆç©ºæ ¼ï¼ŒæŸ¥è¯¢å‘½ä»¤æ˜¯å¦åœ¨æ¶ˆæ¯å­—ç¬¦ä¸²ä¸­ï¼Œæ‰§è¡Œæ“ä½œ
```python
async def _message_handler(event, message: qqbot.Message):
    """
    å®šä¹‰äº‹ä»¶å›è°ƒçš„å¤„ç†
    :param event: äº‹ä»¶ç±»å‹
    :param message: äº‹ä»¶å¯¹è±¡ï¼ˆå¦‚ç›‘å¬æ¶ˆæ¯æ˜¯Messageå¯¹è±¡ï¼‰
    """
    msg_api = qqbot.AsyncMessageAPI(t_token, False)
    # æ‰“å°è¿”å›ä¿¡æ¯
    qqbot.logger.info("event %s" % event + ",receive message %s" % message.content)
    message.content = re.sub(r" +", r" ", message.content.strip())
    # è¿è¡Œå‘½ä»¤
    content = message.content
    if "/æŸ¥è¯¢" in content:
        ...

    elif "/æ´»åŠ¨" in content:
        ...

    elif "/ä¿¡æ¯" in content:
        ...

    elif "/ç¦è¨€" in content:
        ...
```
# ä¸‰åˆ†åŠæŒæ¡åŸºç¡€qqæœºå™¨äººå¼€å‘
[è§†é¢‘é“¾æ¥](http://119.29.96.141:81/rickroll.mp4")